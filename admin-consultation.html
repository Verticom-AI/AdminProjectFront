<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÛŒØ±ÛŒØª Ú†Øª</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.rtl.min.css">

    <style>

.recent_heading {float: left; width:40%;}
.srch_bar {
  display: inline-block;
  text-align: right;
  width: 60%;
}
.headind_srch{ padding:10px 29px 10px 20px; overflow:hidden; border-bottom:1px solid #c4c4c4;}

.recent_heading h4 {
  color: #05728f;
  font-size: 21px;
  margin: auto;
}
.srch_bar input{ border:1px solid #cdcdcd; border-width:0 0 1px 0; width:80%; padding:2px 0 4px 6px; background:none;}
.srch_bar .input-group-addon button {
  background: rgba(0, 0, 0, 0) none repeat scroll 0 0;
  border: medium none;
  padding: 0;
  color: #707070;
  font-size: 18px;
}
.srch_bar .input-group-addon { margin: 0 0 0 -27px;}



    </style>
    
    <style>
        body {
            font-family: 'IRANSans', sans-serif;
            background-color: #f8f9fa;
        }

        .chat-container {
            display: flex;
            height: 90vh;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .chat-area {
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .chat-box {
            padding: 15px;
            height: calc(100% - 80px);
            overflow-y: auto;
            border: 1px solid #ddd;
        }

        .chat-message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 10px;
            max-width: 70%;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .chat-message:hover {
            background-color: #e9ecef;
        }

        .chat-message.admin {
            background-color: #cbd0d6;
            color: rgb(96, 88, 88);
            margin-left: auto;
            text-align: right;
        }

        .chat-message.user {
            background-color: #f1f1f1;
            color: #333;
            margin-right: auto;
            text-align: left;
        }

        .chat-footer {
            padding: 10px;
            border-top: 1px solid #e9ecef;
            display: flex;
            gap: 10px;
        }

        #action-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        #action-button.recording {
            background-color: #ff3b30 !important;
            box-shadow: 0 0 10px rgba(255, 59, 48, 0.5);
        }

        /* Ø§Ø³Ù„Ø§ÛŒØ¯ Ø¨Ø§Ø± */
        .slide-bar {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100%;
            background-color: #fff;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
            overflow-y: auto;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .slide-bar.open {
            right: 0;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.open {
            display: block;
        }

        .slide-bar h5 {
            padding: 15px;
            border-bottom: 1px solid #ddd;
            margin: 0;
        }

        .chat-list .chat-item {
            padding: 15px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .chat-list .chat-item:hover {
            background-color: #f1f1f1;
        }
    </style>
</head>

<body>
    
    <!-- Ù‡Ø¯Ø± -->
    <header class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="index.html">ÙˆØ¨ Ø³Ù„Ø§Ù…ØªÛŒ</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Ø®Ø§Ù†Ù‡</a></li>
                    <li class="nav-item"><a class="nav-link" href="products.html">Ù…Ø­ØµÙˆÙ„Ø§Øª</a></li>
                    <li class="nav-item"><a class="nav-link active" href="login.html">ÙˆØ±ÙˆØ¯</a></li>
                    <li class="nav-item"><a class="nav-link" href="register.html">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a></li>
                    <li class="nav-item"><a class="nav-link active" href="central-const.html">Ù…Ø´Ø§ÙˆØ±Ù‡</a></li>

                </ul>
            </div>
        </div>
    </header>
    
    <div class="container my-4">
        <button id="toggle-chat-list" class="btn btn-primary mb-3">Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒÙ‡Ø§</button>

        <div class="chat-container">
            <!-- ÙØ¶Ø§ÛŒ Ú†Øª -->
            <div class="chat-area">
                <div class="chat-box" id="chat-box">
                    <!-- Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </div>
                <div class="chat-footer">
                    <input type="text" id="chat-input" class="form-control" placeholder="Ù¾ÛŒØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...">
                    <button id="action-button" class="btn btn-danger">ğŸ™ï¸</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø§Ø³Ù„Ø§ÛŒØ¯ Ø¨Ø§Ø± -->
    <div class="overlay" id="overlay"></div>
    <div class="slide-bar" id="slide-bar">
        <h5 class="text-center">Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒÙ‡Ø§</h5>
        <div id="chat-list-container" class="chat-list">
            <!-- Ù„ÛŒØ³Øª Ù…Ø´Ø§ÙˆØ±Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
        </div>
    </div>

<section> 


        <!-- Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø³Ø®Ù‡ Ø¯Ø±Ù…Ø§Ù†ÛŒ -->
        <div class="container my-5">
            <h1 class="text-center mb-4">Ø§ÛŒØ¬Ø§Ø¯ Ù†Ø³Ø®Ù‡ Ø¯Ø±Ù…Ø§Ù†ÛŒ</h1>
            <div class="mb-3">
                <input type="text" id="product-search" class="form-control" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„...">
            </div>
            <div id="product-list" class="product-list">
                <!-- Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¬Ø³ØªØ¬Ùˆ Ø´Ø¯Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
            <table class="table table-bordered mt-3">
                <thead class="table-light">
                    <tr>
                        <th>Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„</th>
                        <th>ØªØ¹Ø¯Ø§Ø¯</th>
                        <th>Ø­Ø°Ù</th>
                    </tr>
                </thead>
                <tbody id="prescription-table">
                    <!-- Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ø¨Ù‡ Ù†Ø³Ø®Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
                </tbody>
            </table>
            <button id="finalize-prescription" class="btn btn-success w-100 mt-3">Ø§Ø±Ø³Ø§Ù„ Ù†Ø³Ø®Ù‡ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±</button>
        </div>
    
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const products = [
                    { id: 1, name: "Ú†Ø§ÛŒ Ø³Ø¨Ø²" },
                    { id: 2, name: "Ø¯Ù…Ù†ÙˆØ´ Ù†Ø¹Ù†Ø§Ø¹" },
                    { id: 3, name: "Ø¹Ø³Ù„ Ø·Ø¨ÛŒØ¹ÛŒ" },
                ];
    
                const productSearch = document.getElementById("product-search");
                const productList = document.getElementById("product-list");
                const prescriptionTable = document.getElementById("prescription-table");
    
                // Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª
                productSearch.addEventListener("input", () => {
                    const query = productSearch.value.toLowerCase().trim();
                    productList.innerHTML = ""; // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù†ØªØ§ÛŒØ¬ Ù‚Ø¨Ù„ÛŒ
                    const filteredProducts = products.filter((p) =>
                        p.name.toLowerCase().includes(query)
                    );
    
                    if (filteredProducts.length > 0) {
                        filteredProducts.forEach((product) => {
                            const productItem = document.createElement("div");
                            productItem.className =
                                "d-flex justify-content-between align-items-center product-item mb-2";
                            productItem.innerHTML = `<span>${product.name}</span>`;
                            productItem.addEventListener("click", () =>
                                addProductToPrescription(product)
                            );
                            productList.appendChild(productItem);
                        });
                    } else {
                        productList.innerHTML = `<div class="text-center text-muted">Ù…Ø­ØµÙˆÙ„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div>`;
                    }
                });
    
                productSearch.addEventListener("keydown", (event) => {
                    if (event.key === "Enter") {
                        event.preventDefault();
                        const query = productSearch.value.toLowerCase().trim();
                        const firstProduct = products.find((p) =>
                            p.name.toLowerCase().includes(query)
                        );
                        if (firstProduct) {
                            addProductToPrescription(firstProduct);
                        }
                    }
                });
    
                // Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¨Ù‡ Ù†Ø³Ø®Ù‡
                function addProductToPrescription(product) {
                    const existingRow = prescriptionTable.querySelector(
                        `tr[data-id="${product.id}"]`
                    );
    
                    if (existingRow) {
                        const qtyInput = existingRow.querySelector("input");
                        qtyInput.value = parseInt(qtyInput.value) + 1;
                    } else {
                        const row = document.createElement("tr");
                        row.setAttribute("data-id", product.id);
                        row.innerHTML = `
                            <td>${product.name}</td>
                            <td><input type="number" class="form-control" value="1" min="1"></td>
                            <td><button class="btn btn-sm btn-danger remove-product">Ø­Ø°Ù</button></td>
                        `;
                        prescriptionTable.appendChild(row);
    
                        row.querySelector(".remove-product").addEventListener("click", () =>
                            row.remove()
                        );
                    }
                }
            });
        </script>




    
</section>


    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        class ChatManager {
            constructor() {
                this.chatBox = document.getElementById("chat-box");
                this.chatInput = document.getElementById("chat-input");
                this.actionButton = document.getElementById("action-button");
                this.chatListContainer = document.getElementById("chat-list-container");
                this.consultations = [
                    { id: 1, user: "Ø¹Ù„ÛŒ Ù…Ø­Ù…Ø¯ÛŒ", messages: ["Ø³Ù„Ø§Ù…", "Ù…Ø´Ú©Ù„ Ù…Ù† Ø¯Ø± Ù…ÙˆØ±Ø¯ ÙÛŒØ¨Ø±ÙˆÙ… Ù‡Ø³Øª"] },
                    { id: 2, user: "Ø³Ø§Ø±Ø§ Ø§Ø­Ù…Ø¯ÛŒ", messages: ["Ø³Ù„Ø§Ù…", "Ø±ÛŒØ²Ø´ Ù…Ùˆ Ø¯Ø§Ø±Ù… Ùˆ Ø¯Ù†Ø¨Ø§Ù„ Ø±Ø§Ù‡â€ŒØ­Ù„ Ù‡Ø³ØªÙ…"] },
                ];

          
                this.activeChat = null;
                this.isRecording = false;
                this.mediaRecorder = null;
                this.audioChunks = [];
                this.init();
            }

            init() {
                this.renderChatList();
                this.bindEvents();
            }

            renderChatList() {
                this.consultations.forEach((consultation) => {
                    const chatItem = document.createElement("div");
                    chatItem.className = "chat-item";
                    chatItem.textContent = consultation.user;
                    chatItem.addEventListener("click", () => {
                        this.openChat(consultation);
                        this.closeSlideBar();
                    });
                    this.chatListContainer.appendChild(chatItem);
                });
            }

            openChat(consultation) {
                this.activeChat = consultation;
                this.chatBox.innerHTML = "";
                consultation.messages.forEach((message) => this.addMessage(message, "user"));
            }

            addMessage(content, sender = "admin", isAudio = false) {
                const messageElement = document.createElement("div");
                messageElement.className = `chat-message ${sender}`;
                if (isAudio) {
                    const audioElement = document.createElement("audio");
                    audioElement.src = content;
                    audioElement.controls = true;
                    messageElement.appendChild(audioElement);
                } else {
                    messageElement.textContent = content;
                }

                if (sender === "admin") {
                    messageElement.addEventListener("click", () => {
                        if (confirm("Ù¾ÛŒØ§Ù… Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ")) messageElement.remove();
                    });
                }

                this.chatBox.appendChild(messageElement);
                this.chatBox.scrollTop = this.chatBox.scrollHeight;
            }

            bindEvents() {
                const overlay = document.getElementById("overlay");
                const slideBar = document.getElementById("slide-bar");
                const toggleChatList = document.getElementById("toggle-chat-list");

                toggleChatList.addEventListener("click", () => {
                    slideBar.classList.toggle("open");
                    overlay.classList.toggle("open");
                });

                overlay.addEventListener("click", () => {
                    slideBar.classList.remove("open");
                    overlay.classList.remove("open");
                });

                this.chatInput.addEventListener("input", () => {
                    this.actionButton.textContent = this.chatInput.value.trim() ? "Ø§Ø±Ø³Ø§Ù„" : "ğŸ™ï¸";
                });

                this.chatInput.addEventListener("keydown", (event) => {
                    if (event.key === "Enter") {
                        event.preventDefault();
                        this.sendMessage();
                    }
                });

                this.actionButton.addEventListener("mousedown", () => this.startRecording());
                this.actionButton.addEventListener("mouseup", () => this.stopRecording());
            }

            sendMessage() {
                const message = this.chatInput.value.trim();
                if (message) {
                    this.addMessage(message, "admin");
                    this.chatInput.value = "";
                    this.actionButton.textContent = "ğŸ™ï¸";
                }
            }

            startRecording() {
                this.actionButton.classList.add("recording");
                navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {
                    this.mediaRecorder = new MediaRecorder(stream);
                    this.mediaRecorder.start();
                    this.audioChunks = [];
                    this.mediaRecorder.addEventListener("dataavailable", (event) => {
                        this.audioChunks.push(event.data);
                    });
                    this.isRecording = true;
                });
            }

            stopRecording() {
                if (this.isRecording) {
                    this.mediaRecorder.stop();
                    this.mediaRecorder.addEventListener("stop", () => {
                        const audioBlob = new Blob(this.audioChunks, { type: "audio/mp3" });
                        const audioUrl = URL.createObjectURL(audioBlob);
                        this.addMessage(audioUrl, "admin", true);
                    });
                    this.actionButton.classList.remove("recording");
                    this.isRecording = false;
                }
            }

            closeSlideBar() {
                const slideBar = document.getElementById("slide-bar");
                const overlay = document.getElementById("overlay");
                slideBar.classList.remove("open");
                overlay.classList.remove("open");
            }
        }

        new ChatManager();
    </script>
    <script>

   

    </script>
        <script src="js/tmp.js"></script>

</body>
</html>
